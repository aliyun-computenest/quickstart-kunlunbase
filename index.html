<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="计算巢是阿里云开放给企业应用服务商的服务管理平台。服务商能够在计算巢上发布私有化部署服务，为其客户提供云上软件一键部署的能力；同时也支持全托管模式的服务，赋能服务商托管其客户资源。">
  <title>阿里云 KunlunBase云数据库使用指南 - Aliyun 计算巢 x 泽拓</title>

  <link rel="shortcut icon" href="img/favicon.ico">

  <link rel="stylesheet" href="https://unpkg.com/purecss@1.0.0/build/pure-min.css">
  <link rel="stylesheet" href="css/theme.css">
  

  

  
  

  
    <script src="search/main.js"></script>
  

  

  <script src="js/highlight.min.js"></script>
  <script>hljs.highlightAll();</script>
</head>

<body>
  <div class="container">
    <div class="nav">
      <div class="nav-inner">
        <div class="logo">
          <img src="./img/logo-2x.png">
        </div>
        <div class="nav-list">
          <ul>
          
              <li><a href="#kunlunbase">阿里云 KunlunBase云数据库使用指南</a></li>
              
                  <li><a href="#_1">本文目标</a></li>
                  
              
                  <li><a href="#1">1. 免费试用</a></li>
                  
              
                  <li><a href="#2">2. 云市场购买</a></li>
                  
              
                  <li><a href="#3-xpanelkulunbase">3. 在XPanel创建KulunBase集群</a></li>
                  
              
                  <li><a href="#4">4. 访问计算实例</a></li>
                  
              
                  <li><a href="#5">5. 访问计算节点数据库</a></li>
                  
              
                  <li><a href="#6-kibana">6. 使用 Kibana 实时查看节点的日志</a></li>
                  
              
          
          </ul>
        </div>
      </div>
    </div>
    <div class="content theme-github">
      
      <div class="content-inner">        
        
        <h1 id="kunlunbase">阿里云 KunlunBase云数据库使用指南</h1>
<blockquote>
<p><strong>免责声明：</strong>本服务由第三方提供，我们尽力确保其安全性、准确性和可靠性，但无法保证其完全免于故障、中断、错误或攻击。因此，本公司在此声明：对于本服务的内容、准确性、完整性、可靠性、适用性以及及时性不作任何陈述、保证或承诺，不对您使用本服务所产生的任何直接或间接的损失或损害承担任何责任；对于您通过本服务访问的第三方网站、应用程序、产品和服务，不对其内容、准确性、完整性、可靠性、适用性以及及时性承担任何责任，您应自行承担使用后果产生的风险和责任；对于因您使用本服务而产生的任何损失、损害，包括但不限于直接损失、间接损失、利润损失、商誉损失、数据损失或其他经济损失，不承担任何责任，即使本公司事先已被告知可能存在此类损失或损害的可能性；我们保留不时修改本声明的权利，因此请您在使用本服务前定期检查本声明。如果您对本声明或本服务存在任何问题或疑问，请联系我们。</p>
</blockquote>
<p><strong>注意：</strong></p>
<p>如无特别说明，文中的版本号可以使用任何已发布版本的版本号代替。</p>
<p>所有已发布版本详见：http://doc.kunlunbase.com/Release_notes.html。</p>
<h2 id="_1">本文目标</h2>
<p>指导用户在阿里云上申请使用云数据库KunlunBase计算巢，配置并使用KunlunBase的集群数据库服务。</p>
<h2 id="1">1. 免费试用</h2>
<p>KunlunBase 阿里云计算巢链接如下：</p>
<p>https://computenest.console.aliyun.com/user/cn-hangzhou/recommendService</p>
<p><strong>1.1 点击 “免费试用”</strong></p>
<p><img alt="" src="%E9%98%BF%E9%87%8C%E4%BA%91%E4%BD%BF%E7%94%A8KunlunBase%E4%BA%91%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8C%87%E5%8D%97/1.png" /></p>
<p><strong>1.2 填写相应的信息，申请免费试用</strong></p>
<p>选择模版，填写实例名称和选择分配实例的地域。</p>
<p><img alt="" src="%E9%98%BF%E9%87%8C%E4%BA%91%E4%BD%BF%E7%94%A8KunlunBase%E4%BA%91%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8C%87%E5%8D%97/2.png" /></p>
<p>有两种套餐选择：g6 体验版和 g6 基础版。</p>
<p><img alt="" src="%E9%98%BF%E9%87%8C%E4%BA%91%E4%BD%BF%E7%94%A8KunlunBase%E4%BA%91%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8C%87%E5%8D%97/3.png" /></p>
<p>填写存储节点和计算节点数量，以及服务器root的密码</p>
<p><img alt="" src="%E9%98%BF%E9%87%8C%E4%BA%91%E4%BD%BF%E7%94%A8KunlunBase%E4%BA%91%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8C%87%E5%8D%97/4.png" /></p>
<p>点击 “下一步：确认订单”。同意授权代运维和相关的服务条款。</p>
<p><img alt="" src="%E9%98%BF%E9%87%8C%E4%BA%91%E4%BD%BF%E7%94%A8KunlunBase%E4%BA%91%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8C%87%E5%8D%97/5.png" /></p>
<p>最后一步点击 “开始免费试用”，与此同时会自动开始部署相关的实例。</p>
<p><img alt="" src="%E9%98%BF%E9%87%8C%E4%BA%91%E4%BD%BF%E7%94%A8KunlunBase%E4%BA%91%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8C%87%E5%8D%97/6.png" /></p>
<p>大概10分钟左右就可以完成环境的部署</p>
<p><img alt="" src="%E9%98%BF%E9%87%8C%E4%BA%91%E4%BD%BF%E7%94%A8KunlunBase%E4%BA%91%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8C%87%E5%8D%97/7.png" /></p>
<p><strong>1.3 部署环境检查</strong></p>
<p>部署完毕之后，一共有 5 个实例：一个计算实例，3 个存储实例，和一个运行 XPanel 的实例。</p>
<p><img alt="" src="%E9%98%BF%E9%87%8C%E4%BA%91%E4%BD%BF%E7%94%A8KunlunBase%E4%BA%91%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8C%87%E5%8D%97/8.png" /></p>
<p>在概览界面可以看到 XPanel 网址、XPanel 初始用户名/密码、查看各节点日志的 Kibana 网址，还有安装 KulunBase 软件的操作用户名 klbase。</p>
<p><img alt="" src="%E9%98%BF%E9%87%8C%E4%BA%91%E4%BD%BF%E7%94%A8KunlunBase%E4%BA%91%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8C%87%E5%8D%97/9.png" /></p>
<p><strong>XPanel的地址为：</strong></p>
<p>http://47.97.174.116:18080/KunlunXPanel</p>
<p>初始账号和密码是: super_dba/super_dba</p>
<p><strong>Kibana的地址为：</strong></p>
<p>http://47.97.174.116:5601</p>
<h2 id="2">2. 云市场购买</h2>
<p><strong>2.1 点击“云市场购买”</strong></p>
<p><img alt="" src="%E9%98%BF%E9%87%8C%E4%BA%91%E4%BD%BF%E7%94%A8KunlunBase%E4%BA%91%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8C%87%E5%8D%97/10.png" /></p>
<p><strong>2.2 选择购买的 “套餐版本”，“购买时长” 以及 “服务区域”。之后点击 “立即购买”</strong></p>
<p><img alt="" src="%E9%98%BF%E9%87%8C%E4%BA%91%E4%BD%BF%E7%94%A8KunlunBase%E4%BA%91%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8C%87%E5%8D%97/11.png" /></p>
<p><strong>2.3 填写创建集群的信息</strong></p>
<p>服务实例名称为 Kunluntesting, 地域选择 ”华南1（深圳）”。用户可以根据自己所在的地方选择合适的地域。</p>
<p><img alt="" src="%E9%98%BF%E9%87%8C%E4%BA%91%E4%BD%BF%E7%94%A8KunlunBase%E4%BA%91%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8C%87%E5%8D%97/12.png" /></p>
<p>点击 “新建专有网络”</p>
<p><img alt="" src="%E9%98%BF%E9%87%8C%E4%BA%91%E4%BD%BF%E7%94%A8KunlunBase%E4%BA%91%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8C%87%E5%8D%97/13.png" /></p>
<p>这时会弹出新的页面 “创建专有网络” 和 “交换机”，填入下面信息。</p>
<p><img alt="" src="%E9%98%BF%E9%87%8C%E4%BA%91%E4%BD%BF%E7%94%A8KunlunBase%E4%BA%91%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8C%87%E5%8D%97/14.png" /></p>
<p><img alt="" src="%E9%98%BF%E9%87%8C%E4%BA%91%E4%BD%BF%E7%94%A8KunlunBase%E4%BA%91%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8C%87%E5%8D%97/15.png" /></p>
<p>创建专有网络和交换机成功后，再回到之前填写创建集群信息的页面。</p>
<p>点击倒三角可以选择刚刚创建的 “专用网络” 和 “交换机”，并选择交换机的可用区域</p>
<p><img alt="" src="%E9%98%BF%E9%87%8C%E4%BA%91%E4%BD%BF%E7%94%A8KunlunBase%E4%BA%91%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8C%87%E5%8D%97/16.png" /></p>
<p>输入实例的操作系统 root 的密码。</p>
<p><img alt="" src="%E9%98%BF%E9%87%8C%E4%BA%91%E4%BD%BF%E7%94%A8KunlunBase%E4%BA%91%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8C%87%E5%8D%97/17.png" /></p>
<p>点击 “下一步：确认订单”</p>
<p><img alt="" src="%E9%98%BF%E9%87%8C%E4%BA%91%E4%BD%BF%E7%94%A8KunlunBase%E4%BA%91%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8C%87%E5%8D%97/18.png" /></p>
<p>同意代运维和相关的服务条款，之后点击“立即支付”</p>
<p><img alt="" src="%E9%98%BF%E9%87%8C%E4%BA%91%E4%BD%BF%E7%94%A8KunlunBase%E4%BA%91%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8C%87%E5%8D%97/19.png" /></p>
<p>扣款成功后，点击 “管理控制台”</p>
<p><img alt="" src="%E9%98%BF%E9%87%8C%E4%BA%91%E4%BD%BF%E7%94%A8KunlunBase%E4%BA%91%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8C%87%E5%8D%97/20.png" /></p>
<p>在管理控制台，点击 “立即进入计算巢部署或查看部署详情”。</p>
<p><img alt="" src="%E9%98%BF%E9%87%8C%E4%BA%91%E4%BD%BF%E7%94%A8KunlunBase%E4%BA%91%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8C%87%E5%8D%97/21.png" /></p>
<p>可以看到集群正在部署。</p>
<p><img alt="" src="%E9%98%BF%E9%87%8C%E4%BA%91%E4%BD%BF%E7%94%A8KunlunBase%E4%BA%91%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8C%87%E5%8D%97/22.png" /></p>
<p>部署完毕后，点击 “概览”，可以看到部署集群的信息</p>
<p><img alt="" src="%E9%98%BF%E9%87%8C%E4%BA%91%E4%BD%BF%E7%94%A8KunlunBase%E4%BA%91%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8C%87%E5%8D%97/23.png" /></p>
<p>点击 “资源”，再点击 “ECS实例”，可以看到集群各个服务器的信息。</p>
<p><img alt="" src="%E9%98%BF%E9%87%8C%E4%BA%91%E4%BD%BF%E7%94%A8KunlunBase%E4%BA%91%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8C%87%E5%8D%97/24.png" /></p>
<h2 id="3-xpanelkulunbase">3. 在XPanel创建KulunBase集群</h2>
<p>登录 XPanel，输入用户名 super_dba 和初始密码 super_dba。</p>
<p><img alt="" src="%E9%98%BF%E9%87%8C%E4%BA%91%E4%BD%BF%E7%94%A8KunlunBase%E4%BA%91%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8C%87%E5%8D%97/25.png" /></p>
<p>登录后，需要修改初始修改密码</p>
<p><img alt="" src="%E9%98%BF%E9%87%8C%E4%BA%91%E4%BD%BF%E7%94%A8KunlunBase%E4%BA%91%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8C%87%E5%8D%97/26.png" /></p>
<p>再以新密码重新登录 XPanel</p>
<p><img alt="" src="%E9%98%BF%E9%87%8C%E4%BA%91%E4%BD%BF%E7%94%A8KunlunBase%E4%BA%91%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8C%87%E5%8D%97/27.png" /></p>
<p>然后创建集群，在 “集群管理” 下面 “集群列表” 页面，点击 “新增”。</p>
<p><img alt="" src="%E9%98%BF%E9%87%8C%E4%BA%91%E4%BD%BF%E7%94%A8KunlunBase%E4%BA%91%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8C%87%E5%8D%97/28.png" /></p>
<p>填写 “业务名称”，选择存储和计算实例，修改 shard 个数为 3，其他的栏位为默认值即可。</p>
<p>最后点击 “确认” 创建 KunlunBase 集群。</p>
<p><img alt="" src="%E9%98%BF%E9%87%8C%E4%BA%91%E4%BD%BF%E7%94%A8KunlunBase%E4%BA%91%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8C%87%E5%8D%97/29.png" /></p>
<p>稍等片刻，集群创建成功。</p>
<p><img alt="" src="%E9%98%BF%E9%87%8C%E4%BA%91%E4%BD%BF%E7%94%A8KunlunBase%E4%BA%91%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8C%87%E5%8D%97/30.png" /></p>
<p>在 XPanel 中还可以查看节点监控，显示节点的连接基本信息。</p>
<p>如果是首次登录，需要输入账户名密码，账户名密码均为 admin。</p>
<p><img alt="" src="%E9%98%BF%E9%87%8C%E4%BA%91%E4%BD%BF%E7%94%A8KunlunBase%E4%BA%91%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8C%87%E5%8D%97/31.png" /></p>
<p>在左边栏点击 “shard列表”</p>
<p><img alt="" src="%E9%98%BF%E9%87%8C%E4%BA%91%E4%BD%BF%E7%94%A8KunlunBase%E4%BA%91%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8C%87%E5%8D%97/32.png" /></p>
<p>然后选择一个 shard 节点，点击 “节点监控”</p>
<p><img alt="" src="%E9%98%BF%E9%87%8C%E4%BA%91%E4%BD%BF%E7%94%A8KunlunBase%E4%BA%91%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8C%87%E5%8D%97/33.png" /></p>
<p>然后在 Grafana 登录界面输入 admin/admin，则会展示相应节点监控的页面</p>
<p><img alt="" src="%E9%98%BF%E9%87%8C%E4%BA%91%E4%BD%BF%E7%94%A8KunlunBase%E4%BA%91%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8C%87%E5%8D%97/34.png" /></p>
<p>同样的可以查看计算节点的监控</p>
<p><img alt="" src="%E9%98%BF%E9%87%8C%E4%BA%91%E4%BD%BF%E7%94%A8KunlunBase%E4%BA%91%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8C%87%E5%8D%97/35.png" /></p>
<p>可以从下面链接获取其他通过 XPanel 进行集群管理操作的指导</p>
<p>http://doc.kunlunbase.com/XPanel_Manual.html</p>
<h2 id="4">4. 访问计算实例</h2>
<p><strong>4.1 可以在资源页面点击“远程连接”连接相应的服务器</strong></p>
<p><img alt="" src="%E9%98%BF%E9%87%8C%E4%BA%91%E4%BD%BF%E7%94%A8KunlunBase%E4%BA%91%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8C%87%E5%8D%97/36.png" /></p>
<p>会弹出显示登录服务器的窗口</p>
<p><img alt="" src="%E9%98%BF%E9%87%8C%E4%BA%91%E4%BD%BF%E7%94%A8KunlunBase%E4%BA%91%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8C%87%E5%8D%97/37.png" /></p>
<p><strong>4.2 或在使用本地的 ssh 工具(putty 或其他)通过 Public IP 连接计算节点</strong></p>
<p><img alt="" src="%E9%98%BF%E9%87%8C%E4%BA%91%E4%BD%BF%E7%94%A8KunlunBase%E4%BA%91%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8C%87%E5%8D%97/38.png" /></p>
<p>上面计算节点的公网 IP 是：47.98.206.173</p>
<p><img alt="" src="%E9%98%BF%E9%87%8C%E4%BA%91%E4%BD%BF%E7%94%A8KunlunBase%E4%BA%91%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8C%87%E5%8D%97/39.png" /></p>
<h2 id="5">5. 访问计算节点数据库</h2>
<p>登录计算实例，并切换到 klbase 用户。</p>
<p>通过 XPanel 集群页面知道计算节点的侦听端口为 47001</p>
<p><strong>5.1 修改设置环境变量脚本</strong></p>
<p><code>[klbase@server-0 ~]$ vi ~/kunlunbase/env.sh</code></p>
<p>将<code>envtype="${envtype:-no}"</code> 修改为<code>envtype="all"</code></p>
<p>之后保存并运行<code>. ~/kunlunbase/env.sh</code></p>
<p>5.2 计算节点私有 IP 是 192.168.100.92，通过下面的命令登录 KunlunBase 数据库</p>
<p><code>psql -h 192.168.100.92 -p 47001 postgres</code></p>
<h2 id="6-kibana">6. 使用 Kibana 实时查看节点的日志</h2>
<p>登录 Kibana 链接：http://47.97.174.116:5601。 参考<a href="http://doc.kunlunbase.com/KunlunBase_uses_Kibana_to_view_node_log_information.html">链接</a>中的步骤添加日志索引和查看日志。</p>
<p><img alt="" src="%E9%98%BF%E9%87%8C%E4%BA%91%E4%BD%BF%E7%94%A8KunlunBase%E4%BA%91%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8C%87%E5%8D%97/40.png" /></p>
        
      </div>

      <div class="copyrights">© 2009-2022 Aliyun.com 版权所有</div>
    </div>
  </div>
  
  <!--
  MkDocs version      : 1.5.3
  Docs Build Date UTC : 2023-11-09 11:51:31.792752+00:00
  -->
</body>
</html>